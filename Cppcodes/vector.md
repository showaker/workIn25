
# vectoræ’åº

é™åºæ’åˆ—ï¼š

```c++
#include <iostream>
#include <vector>
#include <algorithm> // åŒ…å« sort å’Œ greater

int main() {
    std::vector<int> vec = {10, 2, 8, 5, 3};

    // æ–¹æ³• 1ï¼šLambda è¡¨è¾¾å¼
    std::sort(vec.begin(), vec.end(), [](int a, int b) { return a > b; });
    std::cout << "Lambda é™åºç»“æœ: ";
    for (int num : vec) std::cout << num << " ";
    std::cout << std::endl;

    // é‡æ–°åˆå§‹åŒ– vector
    vec = {10, 2, 8, 5, 3};

    // æ–¹æ³• 2ï¼šstd::greater
    std::sort(vec.begin(), vec.end(), std::greater<int>());
    std::cout << "std::greater é™åºç»“æœ: ";
    for (int num : vec) std::cout << num << " ";
    std::cout << std::endl;

    return 0;
}
```

æœ€åä¸€é¡¹å…ƒç´ ï¼šback

```c++
return (nums.back() - 1) * (nums[nums.size() - 2] - 1);
```

# vector ä¸­æœ€å¤§å…ƒç´ 

```
#include <iostream>
#include <vector>
#include <algorithm>  // std::max_element
#include <iterator>   // std::begin, std::end

int main() {
    std::vector<int> vec = {3, 7, 2, 9, 1, 5};

    // ä½¿ç”¨ std::max_element æ‰¾åˆ°æœ€å¤§å…ƒç´ çš„è¿­ä»£å™¨
    auto max_it = std::max_element(std::begin(vec), std::end(vec));

    if (max_it != std::end(vec)) {
        std::cout << "æœ€å¤§å…ƒç´ æ˜¯: " << *max_it << std::endl;
    } else {
        std::cout << "vectorä¸ºç©º" << std::endl;
    }

    return 0;
}
```


# find

> åœ¨ C++ æ ‡å‡†åº“ä¸­ï¼Œä¸åŒå®¹å™¨æˆ–ç±»çš„ `find` æ–¹æ³•çš„è¿”å›å€¼å’Œè¡Œä¸ºå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ç”¨æˆ·æåˆ°çš„ **`npos`** é€šå¸¸ä¸å­—ç¬¦ä¸²çš„ `find` æ–¹æ³•ç›¸å…³ï¼Œè€Œå“ˆå¸Œè¡¨ï¼ˆå¦‚ `std::unordered_map` æˆ– `std::unordered_set`ï¼‰çš„ `find` æ–¹æ³•è¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œè€Œé `npos`ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†å¯¹æ¯”ï¼š
>
> ---
>
> ### **1. `std::unordered_map`ï¼ˆå“ˆå¸Œè¡¨ï¼‰çš„ `find` æ–¹æ³•**
> - **åŠŸèƒ½**ï¼šåœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾é”®ï¼ˆkeyï¼‰ï¼Œè¿”å›æŒ‡å‘è¯¥é”®çš„è¿­ä»£å™¨ã€‚
> - **è¿”å›å€¼**ï¼š
>   - å¦‚æœæ‰¾åˆ°é”®ï¼Œè¿”å›æŒ‡å‘è¯¥é”®-å€¼å¯¹çš„è¿­ä»£å™¨ï¼ˆ`iterator` æˆ– `const_iterator`ï¼‰ã€‚
>   - **å¦‚æœæœªæ‰¾åˆ°**ï¼Œè¿”å›å“ˆå¸Œè¡¨çš„ `end()` è¿­ä»£å™¨ï¼ˆ`map.end()`ï¼‰ã€‚
> - **ç¤ºä¾‹**ï¼š
>   ```cpp
>   #include <unordered_map>
>   std::unordered_map<int, std::string> myMap;
>   // å‡è®¾ myMap ä¸­æ²¡æœ‰é”®ä¸º 42 çš„å…ƒç´ 
>   auto it = myMap.find(42);
>   if (it == myMap.end()) {
>       std::cout << "æœªæ‰¾åˆ°é”® 42" << std::endl;
>   }
>   ```
>
> ---
>
> ### **2. `std::string` çš„ `find` æ–¹æ³•**
> - **åŠŸèƒ½**ï¼šåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²æˆ–å­—ç¬¦ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ã€‚
> - **è¿”å›å€¼**ï¼š
>   - å¦‚æœæ‰¾åˆ°å­å­—ç¬¦ä¸²/å­—ç¬¦ï¼Œè¿”å›å…¶èµ·å§‹ç´¢å¼•ï¼ˆ`size_t` ç±»å‹ï¼‰ã€‚
>   - **å¦‚æœæœªæ‰¾åˆ°**ï¼Œè¿”å› `std::string::npos`ï¼ˆä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œé€šå¸¸ä¸º `-1` æˆ– `static_cast<size_t>(-1)`ï¼‰ã€‚
> - **ç¤ºä¾‹**ï¼š
>   ```cpp
>   std::string s = "Hello, World!";
>   size_t pos = s.find("Python"); // æœªæ‰¾åˆ°
>   if (pos == std::string::npos) {
>       std::cout << "æœªæ‰¾åˆ°å­å­—ç¬¦ä¸²" << std::endl;
>   }
>   ```
>
> ---
>
> ### **3. å…¶ä»–å®¹å™¨çš„ `find` æ–¹æ³•**
> #### **a. `std::vector` æˆ– `std::list` çš„ `find`**
> - **æ³¨æ„**ï¼šè¿™äº›å®¹å™¨æœ¬èº«æ²¡æœ‰ `find` æˆå‘˜å‡½æ•°ï¼Œè€Œæ˜¯é€šè¿‡ `<algorithm>` å¤´ä¸­çš„ `std::find` ç®—æ³•å®ç°ã€‚
> - **è¿”å›å€¼**ï¼š
>   - å¦‚æœæ‰¾åˆ°å…ƒç´ ï¼Œè¿”å›æŒ‡å‘è¯¥å…ƒç´ çš„è¿­ä»£å™¨ã€‚
>   - **å¦‚æœæœªæ‰¾åˆ°**ï¼Œè¿”å›å®¹å™¨çš„ `end()` è¿­ä»£å™¨ã€‚
> - **ç¤ºä¾‹**ï¼š
>   ```cpp
>   #include <algorithm>
>   std::vector<int> vec = {1, 2, 3};
>   auto it = std::find(vec.begin(), vec.end(), 4);
>   if (it == vec.end()) {
>       std::cout << "æœªæ‰¾åˆ°å…ƒç´  4" << std::endl;
>   }
>   ```
>
> #### **b. `std::map` çš„ `find`**
> - **åŠŸèƒ½**ï¼šåœ¨æœ‰åºæ˜ å°„ä¸­æŸ¥æ‰¾é”®ï¼Œè¿”å›è¿­ä»£å™¨ã€‚
> - **è¿”å›å€¼**ï¼š
>   - å¦‚æœæ‰¾åˆ°é”®ï¼Œè¿”å›æŒ‡å‘è¯¥é”®çš„è¿­ä»£å™¨ã€‚
>   - **æœªæ‰¾åˆ°æ—¶è¿”å› `map.end()`**ï¼Œä¸ `unordered_map` è¡Œä¸ºä¸€è‡´ã€‚
>
> ---
>
> ### **å…³é”®åŒºåˆ«**
> | **æ–¹æ³•**                   | **è¿”å›å€¼ç±»å‹**       | **æœªæ‰¾åˆ°æ—¶çš„è¿”å›å€¼** | **ç”¨é€”**                    |
> | -------------------------- | -------------------- | -------------------- | --------------------------- |
> | `std::unordered_map::find` | è¿­ä»£å™¨ï¼ˆ`iterator`ï¼‰ | `map.end()`          | æŸ¥æ‰¾å“ˆå¸Œè¡¨ä¸­çš„é”®            |
> | `std::string::find`        | `size_t`             | `std::string::npos`  | æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­çš„å­å­—ç¬¦ä¸²/å­—ç¬¦ |
> | `std::find` (ç®—æ³•)         | è¿­ä»£å™¨               | `end` è¿­ä»£å™¨         | æŸ¥æ‰¾å®¹å™¨ä¸­çš„å…ƒç´             |
>
> ---
>
> ### **å“ªä¸ªä¼šè¿”å› `npos`ï¼Ÿ**
> - **åªæœ‰ `std::string` çš„ `find` æ–¹æ³•ä¼šè¿”å› `npos`**ã€‚å…¶ä»–å®¹å™¨æˆ–ç®—æ³•çš„ `find` æ–¹æ³•å‡é€šè¿‡è¿”å› `end()` è¿­ä»£å™¨è¡¨ç¤ºæœªæ‰¾åˆ°ã€‚
>
> ---
>
> ### **å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹**
> 1. **æ··æ·† `npos` å’Œ `end()`**ï¼š
>    - å¦‚æœè¯¯å°† `unordered_map::find` çš„è¿”å›å€¼ä¸ `npos` æ¯”è¾ƒï¼Œä¼šå¯¼è‡´é€»è¾‘é”™è¯¯ã€‚
>    ```cpp
>    // é”™è¯¯ç¤ºä¾‹ï¼ˆå“ˆå¸Œè¡¨çš„ find ä¸ä¼šè¿”å› nposï¼‰
>    if (myMap.find(key) == std::string::npos) { // é”™è¯¯ï¼ç±»å‹ä¸åŒ¹é…
>        // ...
>    }
>    ```
>
> 2. **å­—ç¬¦ä¸²çš„ `npos` ç±»å‹**ï¼š
>    - `std::string::npos` æ˜¯ `size_t` ç±»å‹ï¼Œé€šå¸¸ä¸º `-1` çš„æ— ç¬¦å·å€¼ï¼ˆå¦‚ `static_cast<size_t>(-1)`ï¼‰ï¼Œéœ€ç›´æ¥æ¯”è¾ƒè¿”å›å€¼æ˜¯å¦ç­‰äºå®ƒã€‚
>
> 3. **å…¶ä»–å®¹å™¨çš„ `find`**ï¼š
>    - å¯¹äº `std::vector`ã€`std::list` ç­‰ï¼Œéœ€ä½¿ç”¨ `std::find` ç®—æ³•ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦ç­‰äº `end()` è¿­ä»£å™¨ã€‚
>
> ---
>
> ### **æ€»ç»“**
> - **å“ˆå¸Œè¡¨ï¼ˆ`unordered_map`ï¼‰çš„ `find`**ï¼šè¿”å›è¿­ä»£å™¨ï¼Œæœªæ‰¾åˆ°æ—¶è¿”å› `end()`ã€‚
> - **å­—ç¬¦ä¸²ï¼ˆ`std::string`ï¼‰çš„ `find`**ï¼šè¿”å›ä½ç½®ç´¢å¼•ï¼Œæœªæ‰¾åˆ°æ—¶è¿”å› `npos`ã€‚
> - **å…¶ä»–å®¹å™¨çš„æŸ¥æ‰¾**ï¼šé€šè¿‡ `std::find` ç®—æ³•å®ç°ï¼Œè¿”å›è¿­ä»£å™¨å¹¶æ£€æŸ¥ `end()`ã€‚
>
> ç†è§£è¿™äº›å·®å¼‚èƒ½é¿å…å¸¸è§çš„é€»è¾‘é”™è¯¯ï¼Œç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§ã€‚

![image-20250321181624194](assets/image-20250321181624194.png)

# vector è½¬åŒ–ä¸º å“ˆå¸Œé›†åˆ

```c++
unordered_set<int> st(nums.begin(), nums.end()); // æŠŠ nums è½¬æˆå“ˆå¸Œé›†åˆ
```



# insert

å½“ç„¶å¯ä»¥ï¼ä¸‹é¢ä¸ºä½ è¯¦ç»†ä»‹ç» C++ ä¸­ `std::vector` çš„ `insert` æ–¹æ³•ï¼ŒåŒ…æ‹¬å®ƒçš„åŠŸèƒ½ã€è¯­æ³•ã€å‚æ•°ã€è¿”å›å€¼ã€ä½¿ç”¨ç¤ºä¾‹ä»¥åŠæ€§èƒ½æ³¨æ„äº‹é¡¹ã€‚

---

## ğŸ“Œ `std::vector::insert` ç®€ä»‹

`insert` æ˜¯ `std::vector` çš„ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨äº **åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ **ã€‚æ’å…¥åï¼ŒåŸæœ‰å…ƒç´ ä¼šè‡ªåŠ¨å‘åç§»åŠ¨ï¼Œ`vector` ä¼šè‡ªåŠ¨å¤„ç†å†…å­˜æ‰©å®¹ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚

---

## ğŸ§© å‡½æ•°åŸå‹ï¼ˆC++11 åŠä»¥åå¸¸ç”¨å½¢å¼ï¼‰

```cpp
// 1. æ’å…¥ä¸€ä¸ªå…ƒç´ 
iterator insert( const_iterator pos, const T& value );

// 2. æ’å…¥ n ä¸ªç›¸åŒå…ƒç´ 
iterator insert( const_iterator pos, size_type count, const T& value );

// 3. æ’å…¥ä¸€ä¸ªèŒƒå›´ï¼ˆå¦‚å¦ä¸€ä¸ªå®¹å™¨çš„éƒ¨åˆ†ï¼‰
template< class InputIt >
iterator insert( const_iterator pos, InputIt first, InputIt last );

// 4. æ’å…¥åˆå§‹åŒ–åˆ—è¡¨ï¼ˆC++11 èµ·ï¼‰
iterator insert( const_iterator pos, std::initializer_list<T> ilist );
```

---

## ğŸ“¥ å‚æ•°è¯´æ˜

| å‚æ•°            | è¯´æ˜                                                         |
| --------------- | ------------------------------------------------------------ |
| `pos`           | æŒ‡å‘æ’å…¥ä½ç½®çš„**è¿­ä»£å™¨**ï¼Œæ–°å…ƒç´ å°†æ’å…¥åˆ° `pos` æ‰€æŒ‡ä½ç½®çš„**å‰é¢** |
| `value`         | è¦æ’å…¥çš„å…ƒç´ å€¼                                               |
| `count`         | è¦æ’å…¥çš„ç›¸åŒå…ƒç´ çš„ä¸ªæ•°                                       |
| `first`, `last` | è¦å¤åˆ¶å…ƒç´ çš„èŒƒå›´ `[first, last)`                             |
| `ilist`         | åˆå§‹åŒ–åˆ—è¡¨ï¼Œä¾‹å¦‚ `{1, 2, 3}`                                 |

---

## ğŸ“¤ è¿”å›å€¼

- è¿”å›ä¸€ä¸ª **æŒ‡å‘ç¬¬ä¸€ä¸ªæ’å…¥å…ƒç´ çš„è¿­ä»£å™¨**ã€‚
- å¦‚æœæ²¡æœ‰æ’å…¥å…ƒç´ ï¼ˆå¦‚ `count=0`ï¼‰ï¼Œåˆ™è¿”å› `pos`ã€‚

---

## âœ… ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæ’å…¥å•ä¸ªå…ƒç´ 

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    vector<int> vec = {1, 2, 4, 5};

    // åœ¨å€¼ä¸º 4 çš„å‰é¢æ’å…¥ 3
    auto it = find(vec.begin(), vec.end(), 4);
    vec.insert(it, 3);

    for (int x : vec) {
        cout << x << " ";
    }
    // è¾“å‡º: 1 2 3 4 5
}
```

---

### ç¤ºä¾‹ 2ï¼šæ’å…¥å¤šä¸ªç›¸åŒå…ƒç´ 

```cpp
vector<int> vec = {1, 2, 3};

// åœ¨å¼€å¤´æ’å…¥ 3 ä¸ª 0
vec.insert(vec.begin(), 3, 0);

// ç»“æœ: {0, 0, 0, 1, 2, 3}
```

---

### ç¤ºä¾‹ 3ï¼šæ’å…¥å¦ä¸€ä¸ªå®¹å™¨çš„å…ƒç´ 

```cpp
vector<int> vec = {1, 4};
vector<int> src = {2, 2, 3};

// å°† src çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ° vec ä¸­ 4 çš„å‰é¢
auto it = find(vec.begin(), vec.end(), 4);
vec.insert(it, src.begin(), src.end());

// ç»“æœ: {1, 2, 2, 3, 4}
```

---

### ç¤ºä¾‹ 4ï¼šä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ’å…¥

```cpp
vector<int> vec = {1, 5};

// åœ¨ä¸­é—´æ’å…¥ {2, 3, 4}
auto it = find(vec.begin(), vec.end(), 5);
vec.insert(it, {2, 3, 4});

// ç»“æœ: {1, 2, 3, 4, 5}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½

### 1. **æ—¶é—´å¤æ‚åº¦**
- **æ’å…¥ä¸€ä¸ªå…ƒç´ åœ¨æœ«å°¾**ï¼šå¹³æ‘Š O(1)
- **åœ¨ä¸­é—´æˆ–å¼€å¤´æ’å…¥**ï¼šO(n)ï¼Œå› ä¸ºéœ€è¦ç§»åŠ¨åç»­æ‰€æœ‰å…ƒç´ 
- **é¢‘ç¹åœ¨å¼€å¤´æ’å…¥æ•ˆç‡å¾ˆä½**ï¼Œå»ºè®®ä½¿ç”¨ `std::deque` æˆ–åå‘æ’å…¥å†åè½¬

### 2. **è¿­ä»£å™¨å¤±æ•ˆ**
- `insert` å¯èƒ½å¯¼è‡´ **æ‰€æœ‰è¿­ä»£å™¨ã€æŒ‡é’ˆã€å¼•ç”¨å¤±æ•ˆ**ï¼Œå› ä¸º `vector` å¯èƒ½é‡æ–°åˆ†é…å†…å­˜ã€‚
- æ’å…¥åï¼Œä¸è¦ä½¿ç”¨æ’å…¥å‰ä¿å­˜çš„è¿­ä»£å™¨ã€‚

### 3. **æ¨èä½¿ç”¨ `emplace`ï¼ˆC++11ï¼‰**
å¦‚æœæƒ³åŸåœ°æ„é€ å¯¹è±¡ï¼ˆé¿å…æ‹·è´ï¼‰ï¼Œå¯ä»¥ç”¨ `emplace`ï¼š

```cpp
vec.emplace(vec.begin() + 1, 99); // åŸåœ°æ„é€  int(99)
```

---

## ğŸ†š `push_back` vs `insert`

| æ–¹æ³•        | ç”¨é€”           | æ•ˆç‡                     |
| ----------- | -------------- | ------------------------ |
| `push_back` | åœ¨æœ«å°¾æ·»åŠ å…ƒç´  | æœ€å¿«ï¼Œæ¨èç”¨äºå°¾éƒ¨æ’å…¥   |
| `insert`    | åœ¨ä»»æ„ä½ç½®æ’å…¥ | ä¸­é—´æ’å…¥è¾ƒæ…¢ï¼Œä½†åŠŸèƒ½æ›´å¼º |

---

## âœ… å°ç»“ï¼š`insert` çš„å…¸å‹ç”¨é€”

- åœ¨æ’åºæ•°ç»„ä¸­æ’å…¥å…ƒç´ ä¿æŒæœ‰åº
- åŠ¨æ€æ„é€ åˆ—è¡¨
- ä»å…¶ä»–å®¹å™¨æ‰¹é‡æ’å…¥æ•°æ®
- æ„é€ åˆå§‹åŒ–åºåˆ—

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [cppreference: vector::insert](https://en.cppreference.com/w/cpp/container/vector/insert)

---

å¦‚æœä½ æœ‰å…·ä½“ä½¿ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚æ’å…¥è‡ªå®šä¹‰ç±»å¯¹è±¡ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼‰ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ä¸¾ä¾‹è¯´æ˜ ğŸ˜Š























