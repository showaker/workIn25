

**PCI总线基础与架构知识测验（修正版）**

**一、 单项选择题 (共20题)**

1.  根据资料，PCI总线采用的是哪种数据传输方式？
    A) 串行传输
    B) 并行传输
    C) 同步传输
    D) 异步传输

2.  资料中提到的“Shared Bus”（共享总线）最可能对应PCI架构中的哪个概念？
    A) 点对点连接
    B) 所有设备共享的公共地址和数据总线
    C) 数据通道（Lane）
    D) 事务层包

3.  在PCI总线中，多个设备同时请求使用总线时，由什么机制来决定哪个设备获得使用权？
    A) 链路训练 (Link Training)
    B) 总线仲裁 (Bus Arbitration)
    C) 流量控制 (Flow Control)
    D) 配置空间读取

4.  资料中“Configuration Space”（配置空间）的主要作用是什么？
    A) 存储用户数据
    B) 存储设备的配置信息，如设备ID、厂商ID、BAR等
    C) 作为高速缓存
    D) 传输中断信号

5.  PCI总线的“Bus Master”（总线主控）功能指的是？
    A) 只能被动接收CPU命令的设备
    B) 能够主动发起总线事务，直接与其他设备或内存交换数据的设备
    C) 负责产生系统时钟的设备
    D) 总线上的根节点

6.  PCI总线的地址线和数据线是分开的，这种设计被称为？——错误——
    A) 复用总线 (Multiplexed Bus)
    B) 分离式总线 (Split Transaction Bus)
    C) 非复用总线 (Non-Multiplexed Bus)
    D) 串行总线 (Serial Bus)
    

8.  资料中提到的“Clock”（时钟）在PCI总线中是如何处理的？
    A) 时钟信息嵌入在数据流中
    B) 由一个独立的时钟线（CLK）提供全局同步时钟
    C) 由设备自带晶振提供
    D) 由操作系统软件模拟

9.  当PCI总线上的主控设备完成一次数据传输后，它会释放什么？
    A) 配置空间
    B) 总线使用权 (Bus Grant)
    C) 内存地址
    D) 电源

10.  以下哪种机制用于解决PCI总线上的设备冲突，确保同一时刻只有一个主控设备在使用总线？
    A) ACK/NAK 重传
    B) 总线仲裁 (Bus Arbitration)
    C) 数据加扰 (Scrambling)
    D) 流量控制 (Flow Control)

11. 资料中“Address Phase”（地址相）和“Data Phase”（数据相）是PCI总线事务的哪一部分？
    A) 事务层包的头部
    B) 一次总线访问的两个主要阶段
    C) 配置空间的两个区域
    D) 电源管理状态

12. 当一个PCI设备需要向CPU报告事件时，会使用什么信号？
    A) INTA#, INTB#, INTC#, INTD#
    B) CLK
    C) AD[31:0]
    D) FRAME#

13. 在PCI总线的地址相，地址和命令信息是通过哪条总线传输的？
    A) 数据总线 (AD[31:0])
    B) 命令/字节使能总线 (C/BE#[3:0])
    C) 帧信号 (FRAME#)
    D) 设备选择信号 (DEVSEL#)

14. 以下哪个信号用于指示当前总线事务的开始和结束？
    A) CLK
    B) FRAME#
    C) IRDY#
    D) TRDY#

15. 资料中提到的“BAR”（Base Address Register）的主要作用是什么？
    A) 存储设备的厂商ID
    B) 告诉系统设备需要多大的内存或I/O地址空间，以及该空间的类型
    C) 控制设备的电源状态
    D) 存储中断向量

16. 以下哪种总线操作用于从内存或I/O空间读取数据？
    A) Memory Write
    B) Memory Read
    C) Configuration Write
    D) Interrupt Acknowledge

17. 以下哪种总线操作用于向内存或I/O空间写入数据？
    A) Memory Write
    B) Memory Read
    C) Configuration Read
    D) Special Cycle

18. 当系统需要读取PCI设备的配置信息时，会使用哪种总线操作？
    A) Configuration Read
    B) Configuration Write
    C) Memory Read
    D) I/O Write

19. 在PCI总线中，负责连接CPU和内存子系统到PCI总线的组件通常被称为？
    A) PCI Endpoint
    B) PCI Bridge
    C) PCI Root Complex
    D) PCI Switch

20. PCI Bridge（PCI桥）的主要功能是什么？
    A) 将一个PCIe链路转换为PCI总线
    B) 连接两个PCI总线段，隔离电气负载，并进行地址转换
    C) 为设备提供电源管理
    D) 生成系统时钟

21. 资料中“Scrambling”（加扰）技术在PCI总线中是否存在或常用？
    A) 是，用于加密数据
    B) 是，用于减少EMI
    C) 否，这不是PCI总线的标准技术
    D) 是，用于时钟恢复

**二、 多项选择题 (共15题)**

21. 以下哪些是传统PCI总线的特点？（多选）
    A) 共享总线架构
    B) 并行传输
    C) 点对点连接
    D) 需要总线仲裁

22. 一个完整的PCI总线事务通常包含哪几个阶段？（多选）
    A) 地址相 (Address Phase)
    B) 数据相 (Data Phase)
    C) 仲裁相 (Arbitration Phase)
    D) 配置相 (Configuration Phase)

23. 以下哪些是PCI总线的关键信号？（多选）
    A) CLK (时钟)
    B) AD[31:0] (地址/数据复用线)
    C) C/BE#[3:0] (命令/字节使能)
    D) FRAME# (帧)
    E) IRDY# (发起者就绪)
    F) TRDY# (目标就绪)

24. 以下哪些是PCI总线仲裁过程中的关键信号？（多选）
    A) REQ# (总线请求)
    B) GNT# (总线允许)
    C) CLK
    D) FRAME#

25. 以下哪些是PCI总线的主要操作类型？（多选）
    A) Memory Read/Write
    B) I/O Read/Write
    C) Configuration Read/Write
    D) Special Cycle

26. 以下关于PCI总线主控（Bus Master）的说法，哪些是正确的？（多选）
    A) CPU是默认的主控设备。
    B) 任何PCI设备都可以申请成为主控设备。
    C) 主控设备可以主动发起对内存或其他设备的访问。
    D) 主控设备不需要经过仲裁即可使用总线。

27. 以下关于PCI配置空间的说法，哪些是正确的？（多选）
    A) 每个PCI设备都有一个256字节的配置空间。
    B) 配置空间包含了设备ID、厂商ID、类代码等信息。
    C) BAR（基地址寄存器）位于配置空间内。
    D) 配置空间只能由CPU访问。

28. 以下关于PCI中断的说法，哪些是正确的？（多选）
    A) PCI设备使用INTA#, INTB#, INTC#, INTD#信号来请求中断。
    B) 这些中断信号通常是共享的。
    C) 系统通过中断控制器（如PIC或APIC）来处理PCI中断。
    D) 每个PCI设备必须有四个独立的中断引脚。

29. 以下哪些是PCI桥（PCI Bridge）的功能？（多选）
    A) 隔离两个PCI总线段的电气特性。
    B) 进行地址空间的转换和映射。
    C) 作为下游总线的仲裁器。
    D) 扩展总线的驱动能力。

30. 在PCI总线的数据相，哪些信号用于控制数据传输的节奏？（多选）
    A) IRDY# (发起者就绪)
    B) TRDY# (目标就绪)
    C) FRAME#
    D) DEVSEL#

31. 以下哪些是PCI总线的物理特性？（多选）
    A) 32位或64位数据宽度
    B) 33MHz或66MHz工作频率
    C) 使用差分信号
    D) 使用TTL电平

32. 以下关于PCI总线“分离式事务”（Split Transaction）的说法，哪些是正确的？（多选）
    A) 它允许主控设备在发出地址后立即释放总线。
    B) 目标设备在准备好数据后，可以主动发起一个“目标发起”的事务来返回数据。
    C) 这种机制提高了总线利用率。
    D) 它是PCI总线的基本特性之一。

33. 以下哪些信息会包含在PCI总线的“命令/字节使能”C/BE#[3:0]信号中？（多选）
    A) 本次事务的类型（如Memory Read, I/O Write等）
    B) 哪些字节被选中进行传输（字节使能）
    C) 设备的地址
    D) 数据的值

34. 以下哪些是PCI总线相对于更早总线（如ISA）的优势？（多选）
    A) 更高的带宽
    B) 即插即用（PnP）
    C) 更好的性能
    D) 支持总线主控

35. 以下关于PCI总线信号电平的说法，哪些是正确的？（多选）
    A) PCI 2.3及以前版本使用5V信号。
    B) PCI 2.3及以后版本支持3.3V信号。
    C) 存在5V/3.3V混合插槽。
    D) 信号电平与设备性能无关。

**三、 判断题 (共15题)**

36.  ( ) PCI总线使用共享总线架构，所有设备共享同一条总线。
37.  ( ) PCI总线的带宽与总线的频率和数据宽度直接相关。
38.  ( ) 在PCI总线中，任何时候都只能有一个主控设备在使用总线。
39.  ( ) PCI总线的地址线和数据线是分开的，不复用。
40.  ( ) PCI设备的配置空间大小是固定的256字节。
41.  ( ) 任何PCI设备都可以在任何时候主动发起对总线的访问。
42.  ( ) PCI桥的主要作用是连接不同代的PCIe设备。
43.  ( ) PCI总线使用独立的时钟线（CLK）进行同步。
44.  ( ) “Scrambling”（加扰）是PCI总线保证数据可靠性的关键技术。
45.  ( ) PCI总线的64位版本比32位版本更常见。
46.  ( ) PCI总线上的中断信号（INTA#等）可以被多个设备共享。
47.  ( ) CPU是PCI总线上的默认主控设备。
48.  ( ) PCI总线的“分离式事务”机制允许主控设备在等待响应时释放总线。
49.  ( ) PCI总线的配置空间只能由操作系统内核访问。
50.  ( ) PCI总线的电气规范只支持5V信号。

---
**答案、原理与知识点解析**

**一、 单项选择题**

1.  **答案：B) 并行传输**
    *   **原理与知识点**：PCI总线是并行总线，使用多根数据线（32或64根）同时传输一个数据字。

2.  **答案：B) 所有设备共享的公共地址和数据总线**
    *   **原理与知识点**：这是PCI总线的核心特征。所有连接到同一PCI总线的设备都挂接在相同的地址、数据和控制信号线上。

3.  **答案：B) 总线仲裁 (Bus Arbitration)**
    *   **原理与知识点**：当多个主控设备（Bus Master）同时请求使用总线时，一个专门的仲裁器（Arbiter）根据优先级等规则决定哪个设备获得总线使用权（GNT#信号）。

4.  **答案：B) 存储设备的配置信息，如设备ID、厂商ID、BAR等**
    *   **原理与知识点**：与PCIe类似，PCI设备也有一个标准化的配置空间，用于系统发现和配置设备。

5.  **答案：B) 能够主动发起总线事务，直接与其他设备或内存交换数据的设备**
    *   **原理与知识点**：总线主控是PCI总线的一个重要特性，允许设备（如网卡、硬盘控制器）绕过CPU直接进行DMA传输，提高效率。

6.  **答案：C) 非复用总线 (Non-Multiplexed Bus)**
    *   **原理与知识点**：在PCI总线中，地址和数据使用独立的总线（AD[31:0]在地址相传输地址，在数据相传输数据），这与地址/数据复用的总线不同。
    *   修改——A
    *   ✅ PCI总线采用的是地址/数据复用（Multiplexed Address/Data）架构，即地址和数据共享同一组信号线，分时传输。

7.  **答案：B) 由一个独立的时钟线（CLK）提供全局同步时钟**
    *   **原理与知识点**：PCI总线是一个同步总线，所有操作都由一个全局的CLK信号同步。

8.  **答案：B) 总线使用权 (Bus Grant)**
    *   **原理与知识点**：主控设备在完成其总线事务后，必须释放总线使用权，以便仲裁器可以将总线分配给其他请求设备。

9.  **答案：B) 总线仲裁 (Bus Arbitration)**
    *   **原理与知识点**：总线仲裁是解决共享总线资源冲突的唯一机制。

10. **答案：B) 一次总线访问的两个主要阶段**
    *   **原理与知识点**：一次PCI总线访问首先在地址相广播地址和命令，然后在数据相进行数据的读取或写入。

11. **答案：A) INTA#, INTB#, INTC#, INTD#**
    *   **原理与知识点**：这是PCI设备用于向系统请求中断的标准信号。

12. **答案：A) 数据总线 (AD[31:0])**
    *   **原理与知识点**：在地址相，地址信息通过AD[31:0]总线传输，同时C/BE#[3:0]传输命令码。

13. **答案：B) FRAME#**
    *   **原理与知识点**：FRAME#信号由主控设备驱动，有效时表示一个总线事务的开始，无效时表示事务的结束。

14. **答案：B) 告诉系统设备需要多大的内存或I/O地址空间，以及该空间的类型**
    *   **原理与知识点**：BAR在设备枚举时由系统软件编程，以映射设备的寄存器或内存区域到系统的地址空间。

15. **答案：B) Memory Read**
    *   **原理与知识点**：这是标准的内存读取操作。

16. **答案：A) Memory Write**
    *   **原理与知识点**：这是标准的内存写入操作。

17. **答案：A) Configuration Read**
    *   **原理与知识点**：这是访问设备配置空间的标准操作。

18. **答案：B) PCI Bridge**
    *   **原理与知识点**：在传统PCI架构中，连接CPU/内存和PCI总线的通常是北桥芯片（Northbridge），它本质上是一个PCI桥。"Root Complex"是PCIe的术语。

19. **答案：B) 连接两个PCI总线段，隔离电气负载，并进行地址转换**
    *   **原理与知识点**：PCI桥用于扩展总线，它可以连接两个独立的PCI总线，管理它们之间的通信。

20. **答案：C) 否，这不是PCI总线的标准技术**
    *   **原理与知识点**：加扰（Scrambling）是高速串行总线（如PCIe, SATA）中用于信号完整性的技术，传统并行PCI总线不使用此技术。

**二、 多项选择题**

21. **答案：A, B, D**
    *   **原理与知识点**：PCI是共享、并行总线，需要仲裁。点对点是PCIe的特征。

22. **答案：A, B**
    *   **原理与知识点**：一次总线事务的核心是地址相和数据相。仲裁相是事务开始前的独立过程。

23. **答案：A, B, C, D, E, F**
    *   **原理与知识点**：这些都是PCI总线定义的关键控制和数据信号。

24. **答案：A, B**
    *   **原理与知识点**：REQ#是设备发出的总线请求，GNT#是仲裁器发出的总线允许。CLK是时钟，FRAME#是事务控制信号。

25. **答案：A, B, C, D**
    *   **原理与知识点**：这些都是PCI规范定义的标准总线操作。

26. **答案：A, B, C**
    *   **原理与知识点**：任何设备都可以是主控，但必须通过仲裁获得总线使用权。

27. **答案：A, B, C**
    *   **原理与知识点**：PCI配置空间为256字节，包含设备信息和BAR。它可以通过特殊的配置读写周期由任何主控设备访问。

28. **答案：A, B, C**
    *   **原理与知识点**：中断信号是共享的，由中断控制器集中处理。

29. **答案：A, B, C, D**
    *   **原理与知识点**：这些都是PCI桥的主要功能。

30. **答案：A, B**
    *   **原理与知识点**：IRDY#和TRDY#是握手信号，它们共同控制数据传输的时序。FRAME#控制整个事务，DEVSEL#表示目标设备被选中。

31. **答案：A, B, D**
    *   **原理与知识点**：PCI支持32/64位和33/66MHz。它使用单端TTL电平，而非差分信号。

32. **答案：A, B, C, D**
    *   **原理与知识点**：分离式事务是PCI的一个重要特性，允许主控设备释放总线，目标设备稍后通过“目标发起”的事务来完成数据传输。

33. **答案：A, B**
    *   **原理与知识点**：C/BE#[3:0]在地址相传输命令码，在数据相传输字节使能信号。

34. **答案：A, B, C, D**
    *   **原理与知识点**：这些都是PCI相对于ISA等旧总线的优势。

35. **答案：A, B, C**
    *   **原理与知识点**：PCI规范支持5V和3.3V两种信号电平，并有混合插槽设计以保证兼容性。

**三、 判断题**

36.  **答案：正确**
    *   **解析**：这是PCI总线的基础。

37.  **答案：正确**
    *   **解析**：带宽 = 频率 × 数据宽度。

38.  **答案：正确**
    *   **解析**：这是共享总线的基本原则，由总线仲裁保证。

39.  **答案：错误**
    *   **解析**：PCI总线是**复用**总线。地址和数据都通过AD[31:0]总线传输，只是在不同的时钟周期。

40.  **答案：正确**
    *   **解析**：这是PCI规范的定义。

41.  **答案：错误**
    *   **解析**：必须先通过总线仲裁获得使用权（GNT#信号）后才能发起访问。

42.  **答案：错误**
    *   **解析**：PCI桥用于连接PCI总线段。连接PCI和PCIe的是PCI-to-PCIe桥。

43.  **答案：正确**
    *   **解析**：PCI是同步总线。

44.  **答案：错误**
    *   **解析**：加扰不是PCI总线的技术。

45.  **答案：错误**
    *   **解析**：32位33MHz的版本最为普遍。

46.  **答案：正确**
    *   **解析**：中断线通常是共享的。

47.  **答案：正确**
    *   **解析**：CPU通常是总线上的主要主控。

48.  **答案：正确**
    *   **解析**：这是分离式事务的核心思想。

49.  **答案：错误**
    *   **解析**：任何总线主控设备（包括其他PCI设备）都可以通过配置周期访问配置空间。

50.  **答案：错误**
    *   **解析**：PCI规范支持3.3V信号。

---
